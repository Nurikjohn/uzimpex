doctype html
html(lang="en")
  head
    meta(charset="utf-8")
    meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
    title Add Product
    link(href="/../css/bootstrap.min.css" rel="stylesheet")
    style.
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    // Custom styles for this template
    link(href="/../css/bootstrap.min.css" rel="stylesheet")
  body.bg-light
    .container
      .text-center
        img.d-block.mx-auto.mb-4(src="../assets/brand/bootstrap-solid.svg" alt="" width="72" height="72")
        h2 Add new product
      form(action="/api/products" method="post" enctype="multipart/form-data")
        .form-group
          label(for="exampleFormControlInput1-1") Title - RU
          input#exampleFormControlInput1-1.form-control(type="text" placeholder="" name="titleRu")
        .form-group
          label(for="exampleFormControlInput1-2") Title - UZ
          input#exampleFormControlInput1-2.form-control(type="text" placeholder="" name="titleUz")
        .form-group
          label(for="exampleFormControlInput1-3") Title - EN
          input#exampleFormControlInput1-3.form-control(type="text" placeholder="" name="titleEn")
        .form-group
          label(for="exampleFormControlInput2") Keywords
          input#exampleFormControlInput2.form-control(type="text" placeholder="" name="keywords")
        .form-group
          label(for="exampleFormControlInput4") Price
          input#exampleFormControlInput4.form-control(type="number" placeholder="" name="price")
        .form-group
          label(for="exampleFormControlInput5") Amount
          input#exampleFormControlInput5.form-control(type="number" placeholder="" name="amount")
        .form-group
          label(for="exampleFormControlSelect1") Category
          select(name="categoryId")#exampleFormControlSelect1.form-control
            for cat in categories
              option(value=cat._id)= cat.title
        .form-group
          label(for="exampleFormControlSelect2") Sub Category
          select(name="subCategoryId")#exampleFormControlSelect2.form-control
            for subCat in subCategory
              option(value=subCat._id)= subCat.title
        .form-group
          label(for="exampleFormControlTextarea1-1") Description - RU
          textarea#exampleFormControlTextarea1-1.form-control(rows="3" name="descriptionRu")
        .form-group
          label(for="exampleFormControlTextarea1-2") Description - UZ
          textarea#exampleFormControlTextarea1-2.form-control(rows="3" name="descriptionUz")
        .form-group
          label(for="exampleFormControlTextarea1-3") Description - EN
          textarea#exampleFormControlTextarea1-3.form-control(rows="3" name="descriptionEn")
        .form-group
          label(for="exampleFormControlTextarea2") Details
          textarea#exampleFormControlTextarea2.form-control(rows="3" name="details")
        .custom-file.mb-3.mt-3
          input#validatedCustomFile.custom-file-input(type="file" required="" name="image")
          label.custom-file-label(for="validatedCustomFile") Choose image...
          .invalid-feedback Example invalid custom file feedback
        button#button-submit.btn.btn-primary.float-right(type="submit") Submit form
      footer.my-5.pt-5.text-muted.text-center.text-small
        p.mb-1 Â© 2008-2020 UzImpex
    script(src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous")
    script(src="/../js/bootstrap.min.js")
    script.
      $("#exampleFormControlSelect1").on("change", async (e) => {
        const categoryId = $('#exampleFormControlSelect1').val();
        const url = `/api/subcategories/category/${categoryId}`;
        const res = await
        $.ajax({
          url,
          type: "GET"
        });

        const {subCategories} = res.data
        console.log(subCategories)
        $('#exampleFormControlSelect2').empty();
        for (let i in subCategories) {
          // console.log(subCategories[i])
          $('#exampleFormControlSelect2').append(`<option value=${subCategories[i]._id}> ${subCategories[i].title} </option>`)
        }
      });
